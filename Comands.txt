from news.models import * 

u1=User.objects.create_user('Кирилл')
u2=User.objects.create_user('Антон')

a1=Author.objects.create(user=u1)
a2=Author.objects.create(user=u2)

c1=Category.objects.create(name='IT')    
c2=Category.objects.create(name='Спорт')
c3=Category.objects.create(name='Погода')
c4=Category.objects.create(name='Обучение')

p1=Post.objects.create(author=a1, type_post='NW', header='Синоптик предупредила о температурных волнах в Москве в июле', text='Волны прохлады будут сменяться жарой на протяжении июля в Москве, сообщила в своем телеграм-канале главный специалист московского метеобюро Татьяна Позднякова. Она отметила, что первая неделя июля в Москве оказалась на пару градусов выше нормы. "В ближайшие выходные дни начнется адвекция прохладного воздуха, температура вернется к норме. Наиболее низкая дневная температура прогнозируется на период 10-12 июля. А затем северный ветер сменится южным, к середине месяца вновь потеплеет: днем до плюс 25 - плюс 27 градусов. Вторая половина месяца начнется волной прохлады, а затем вернутся комфортные плюс 23 - плюс 28", - рассказала Позднякова.')
p2=Post.objects.create(author=a1, type_post='AR', header='Стоит ли учиться в вузе четыре года или лучше пройти курсы и работать?', text='курсы подойдут, если хочется сменить сферу деятельности. Они помогут быстрее понять специфику и погрузиться в IT-сферу. А далее, если потребуется, можно получать высшее образование. Цена первоначальной ошибки в выборе направления будет не будет столь велика. Если есть возможность потратить четыре-шесть лет жизни на обучение, изучить много профильных и сопутствующих предметов, можно идти в вуз. Но нужно понимать: выпускники и вузов, и курсов выходят на рынок труда джунами. Профессиональный уровень, глубина знаний или набор рабочих инструментов зависит от человека, его заинтересованности и желания глубоко погрузиться в предмет.')
p3=Post.objects.create(author=a2, type_post='AR', header='«Спартак» в ожидании трансферов. И снова без победы над «Акроном»', text='«Где трансферы?» — один самых популярных комментариев под каждым постом в спартаковских соцсетях. Болельщикам невтерпеж увидеть новичков, и ждать, судя по всему, осталось недолго. Уже в начале следующей недели медосмотр для «Спартака» должны пройти Бонгонда из «Кадиса» и Медина из ЦСКА. Кстати, армейские фанаты уже проводили парагвайца после матча Братского кубка с «Динамо», когда вся команда подошла к трибуне с серебряными медалями и Кубком России. Медину назвали «иудой» и нецензурно попросили на выход.у а «Спартак» пока играет без болельщиков. Матч с «Торпедо» среди недели прошел в абсолютно закрытом режиме, даже без трансляции. Затяжной спарринг с «Акроном» показали в прямом эфире. А заключительный товарняк с «Нефтчи» пройдет в Тушине, и этот матч смогут посетить все желающие.')

p1.category.add(c3)
p2.category.add(c1, c4) 
p3.category.add(c2)

com1=Comment.objects.create(post=p1, user=u2, text='Класс')
com2=Comment.objects.create(post=p1, user=u1, text='Ага')   
com3=Comment.objects.create(post=p2, user=u2, text='Супер') 
com4=Comment.objects.create(post=p3, user=u1, text='Здорово')

p1.like()
p2.dislike()
p3.like()
p3.like()
com1.like()
com3.like()
com3.like()
com4.dislike()

a1.update_rating() 
a2.update_rating()

Author.objects.order_by('-rating').values('user__username', 'rating').first()

Post.objects.order_by('-rating').values('time_create','author__user__username', 'rating', 'header').first()
best_p=Post.objects.order_by('-rating').first()
best_p.preview()

Comment.objects.filter(post=best_p).values('time_create', 'user__username', 'rating', 'text') 
